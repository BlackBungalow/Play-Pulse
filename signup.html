<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CrÃ©er un compte</title>
  <link rel="stylesheet" href="style-front.css" />
</head>
<body class="auth-page">

  <main class="auth-container">
    <h1>ðŸ†• CrÃ©ez votre compte</h1>
    <p class="subtitle">Rejoignez lâ€™aventure et commencez Ã  jouer</p>

    <form id="signupForm" class="auth-form">
      <input type="email" id="email" placeholder="Adresse e-mail" required />
      <input type="password" id="password" placeholder="Mot de passe (min. 6 caractÃ¨res)" required />
      <button type="submit" class="btn btn-login">CrÃ©er mon compte</button>
    </form>

    <div class="divider">ou</div>

    <button id="googleBtn" class="btn btn-google">ðŸ”— Sâ€™inscrire avec Google</button>

    <p class="switch-auth">
      DÃ©jÃ  un compte ? <a href="identification.html">Se connecter</a>
    </p>

    <p class="back-link">
      <a href="landing.html">â¬… Retour Ã  lâ€™accueil</a>
    </p>
  </main>

  <script type="module">
    import { app } from "./js/firebase-config.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      GoogleAuthProvider,
      signInWithPopup
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const auth = getAuth(app);
    const form = document.getElementById("signupForm");
    const googleBtn = document.getElementById("googleBtn");

    // --- CrÃ©ation par e-mail ---
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = form.email.value.trim();
      const password = form.password.value.trim();

      if (password.length < 6) {
        alert("Le mot de passe doit contenir au moins 6 caractÃ¨res.");
        return;
      }

      try {
        await createUserWithEmailAndPassword(auth, email, password);
        alert("âœ… Compte crÃ©Ã© avec succÃ¨s !");
        window.location.href = "joueur.html";
      } catch (err) {
        console.error(err);
        alert("Erreur de crÃ©ation : " + err.message);
      }
    });

    // --- Inscription avec Google ---
    googleBtn.addEventListener("click", async () => {
      const provider = new GoogleAuthProvider();
      try {
        await signInWithPopup(auth, provider);
        alert("âœ… Inscription rÃ©ussie avec Google !");
        window.location.href = "joueur.html";
      } catch (err) {
        console.error(err);
        alert("Erreur Google : " + err.message);
      }
    });
  </script>
</body>
</html>
